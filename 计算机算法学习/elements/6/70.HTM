<DIV style="FONT-SIZE: 14px; FONT-FAMILY: Consolas, 'Courier New', monospace; WHITE-SPACE: pre; FONT-WEIGHT: normal; COLOR: #d4d4d4; LINE-HEIGHT: 19px; BACKGROUND-COLOR: #1e1e1e">
<DIV><SPAN style="COLOR: #569cd6">import</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #d4d4d4">java.util.*</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #569cd6">class</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #4ec9b0">linetree</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"><SPAN>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">l</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN><SPAN style="COLOR: #9cdcfe">r</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">val</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">lazy</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;linetree lc </SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #569cd6">null</SPAN><SPAN style="COLOR: #d4d4d4">,rc </SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #569cd6">null</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV></SPAN></SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #569cd6">public</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #4ec9b0">void</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #dcdcaa">updata</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">lazyVal</SPAN><SPAN style="COLOR: #d4d4d4">)</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #569cd6">private</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #4ec9b0">void</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #dcdcaa">pushDown</SPAN><SPAN style="COLOR: #d4d4d4">()</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;{</SPAN><SPAN style="COLOR: #d4d4d4"><SPAN></DIV></SPAN></SPAN>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #569cd6">private</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #4ec9b0">void</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #dcdcaa">pushUp</SPAN><SPAN style="COLOR: #d4d4d4">(){</SPAN><SPAN style="COLOR: #d4d4d4"><SPAN></DIV></SPAN></SPAN>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #569cd6">public</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #4ec9b0">void</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #dcdcaa">add</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">x</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">y</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">val</SPAN><SPAN style="COLOR: #d4d4d4">)</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"><SPAN><SPAN style="COLOR: #d4d4d4"></SPAN>&nbsp;</DIV></SPAN></SPAN>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #569cd6">public</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #dcdcaa">search</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">x</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">y</SPAN><SPAN style="COLOR: #d4d4d4">)</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;{</SPAN><SPAN style="COLOR: #d4d4d4"><SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN>&nbsp;</DIV></SPAN></SPAN>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #569cd6">public</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #4ec9b0">void</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #dcdcaa">build</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">x</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">y</SPAN><SPAN style="COLOR: #d4d4d4">)</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"><SPAN class=cloze>[...]</SPAN></SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #d4d4d4">}</SPAN></DIV>
<DIV><SPAN style="COLOR: #569cd6">public</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #569cd6">class</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #4ec9b0">Main</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #569cd6">public</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #569cd6">static</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #4ec9b0">void</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #dcdcaa">main</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #4ec9b0">String</SPAN><SPAN style="COLOR: #d4d4d4">[] </SPAN><SPAN style="COLOR: #9cdcfe">args</SPAN><SPAN style="COLOR: #d4d4d4">)</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;linetree root </SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #c586c0">new</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #dcdcaa">linetree</SPAN><SPAN style="COLOR: #d4d4d4">();</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">len</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">l</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN><SPAN style="COLOR: #9cdcfe">r</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #4ec9b0">Scanner</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">input</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #c586c0">new</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #dcdcaa">Scanner</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #9cdcfe">System</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN style="COLOR: #9cdcfe">in</SPAN><SPAN style="COLOR: #d4d4d4">);</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;len </SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">input</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN style="COLOR: #dcdcaa">nextInt</SPAN><SPAN style="COLOR: #d4d4d4">();</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #9cdcfe">root</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN style="COLOR: #dcdcaa">build</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #b5cea8">0</SPAN><SPAN style="COLOR: #d4d4d4">, len </SPAN><SPAN style="COLOR: #d4d4d4">-</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #b5cea8">1</SPAN><SPAN style="COLOR: #d4d4d4">);</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #c586c0">for</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">i</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #b5cea8">0</SPAN><SPAN style="COLOR: #d4d4d4"> ; i </SPAN><SPAN style="COLOR: #d4d4d4">&lt;</SPAN><SPAN style="COLOR: #d4d4d4"> len ; i </SPAN><SPAN style="COLOR: #d4d4d4">++</SPAN><SPAN style="COLOR: #d4d4d4">)</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #4ec9b0">int</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">val</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">input</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN style="COLOR: #dcdcaa">nextInt</SPAN><SPAN style="COLOR: #d4d4d4">();</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #9cdcfe">root</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN style="COLOR: #dcdcaa">add</SPAN><SPAN style="COLOR: #d4d4d4">(i, i, val);</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l </SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">input</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN style="COLOR: #dcdcaa">nextInt</SPAN><SPAN style="COLOR: #d4d4d4">();</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r </SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #9cdcfe">input</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN style="COLOR: #dcdcaa">nextInt</SPAN><SPAN style="COLOR: #d4d4d4">();</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: #9cdcfe">System</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN style="COLOR: #9cdcfe">out</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN style="COLOR: #dcdcaa">printf</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #ce9178">"%d"</SPAN><SPAN style="COLOR: #d4d4d4">, </SPAN><SPAN style="COLOR: #9cdcfe">root</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN style="COLOR: #dcdcaa">search</SPAN><SPAN style="COLOR: #d4d4d4">(l </SPAN><SPAN style="COLOR: #d4d4d4">-</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #b5cea8">1</SPAN><SPAN style="COLOR: #d4d4d4">, r </SPAN><SPAN style="COLOR: #d4d4d4">-</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #b5cea8">1</SPAN><SPAN style="COLOR: #d4d4d4">));</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">}</SPAN></DIV></DIV>